{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Person Search</title>
    <link rel="stylesheet" href="{% static 'css/stylees.css' %}">
</head>
<body>
    <header>
        <h1>Search Form</h1>
    </header>
    <div class="container">
        <div class="search-form">
            <form method="get" action="{% url 'home' %}">
                <div class="search-container">
                    <div class="search-field">
                        <label for="full_name">Full Name</label>
                        <input type="text" id="full_name" name="full_name" placeholder="Enter Full Name" value="{{ request.GET.full_name }}">
                    </div>
                    <div class="search-field">
                        <label for="job_title">Job Title</label>
                        <input type="text" id="job_title" name="job_title" placeholder="Enter Job Title" value="{{ request.GET.job_title }}">
                    </div>
                    <div class="search-field">
                        <label for="job_title_sub_role">Job Title Sub Role</label>
                        <input type="text" id="job_title_sub_role" name="job_title_sub_role" placeholder="Enter Job Title Sub Role" value="{{ request.GET.job_title_sub_role }}">
                    </div>
                    <div class="search-field">
                        <label for="job_company_location_name">Company Location</label>
                        <input type="text" id="job_company_location_name" name="job_company_location_name" placeholder="Enter Company Location" value="{{ request.GET.job_company_location_name }}">
                    </div>
                    <div class="search-field">
                        <label for="industry">Industry</label>
                        <input type="text" id="industry" name="industry" placeholder="Enter Industry" value="{{ request.GET.industry }}">
                    </div>
                    <div class="search-field">
                        <label for="location_name">Location Name</label>
                        <input type="text" id="location_name" name="location_name" placeholder="Enter Location Name" value="{{ request.GET.location_name }}">
                    </div>
                    <div class="search-field">
                        <label for="location_country">Location Country</label>
                        <input type="text" id="location_country" name="location_country" placeholder="Enter Location Country" value="{{ request.GET.location_country }}">
                    </div>
                    <div class="search-field">
                        <label for="skills">Skills</label>
                        <input type="text" id="skills" name="skills" placeholder="Enter Skills" value="{{ request.GET.skills }}">
                    </div>
                    <div class="search-field">
                        <label for="countries">Countries</label>
                        <input type="text" id="countries" name="countries" placeholder="Enter Countries" value="{{ request.GET.countries }}">
                    </div>
                    <div class="search-field">
                        <label for="education">Education</label>
                        <input type="text" id="education" name="education" placeholder="Enter Education" value="{{ request.GET.education }}">
                    </div>
                </div>
                <input type="submit" value="Search" class="submit-button">
            </form>
        </div>

        {% if request.GET.full_name or request.GET.job_title or request.GET.job_title_sub_role or request.GET.job_company_location_name or request.GET.industry or request.GET.location_name or request.GET.location_country or request.GET.skills or request.GET.countries or request.GET.education %}
            {% if total_results > 0 %}
            <p class="results-count">Total Results: {{ total_results }}</p>


                <!-- Download Button -->
                <div>
                    <a href="{% url 'download' %}?{% if request.GET.full_name %}full_name={{ request.GET.full_name }}&{% endif %}{% if request.GET.job_title %}job_title={{ request.GET.job_title }}&{% endif %}{% if request.GET.job_title_sub_role %}job_title_sub_role={{ request.GET.job_title_sub_role }}&{% endif %}{% if request.GET.job_company_location_name %}job_company_location_name={{ request.GET.job_company_location_name }}&{% endif %}{% if request.GET.industry %}industry={{ request.GET.industry }}&{% endif %}{% if request.GET.location_name %}location_name={{ request.GET.location_name }}&{% endif %}{% if request.GET.location_country %}location_country={{ request.GET.location_country }}&{% endif %}{% if request.GET.skills %}skills={{ request.GET.skills }}&{% endif %}{% if request.GET.countries %}countries={{ request.GET.countries }}&{% endif %}{% if request.GET.education %}education={{ request.GET.education }}&{% endif %}" class="btn download-btn">Download Results</a>
                </div>

                <table class="results-table">
                    <thead>
                        <tr>
                            <th>IDS</th>
                            <th>ID</th>
                            <th>Full Name</th>
                            <th>First Name</th>
                            <th>Middle Initial</th>
                            <th>Middle Name</th>
                            <th>Last Name</th>
                            <th>Gender</th>
                            <th>Birth Year</th>
                            <th>Birth Date</th>
                            <th>LinkedIn URL</th>
                            <th>LinkedIn Username</th>
                            <th>LinkedIn ID</th>
                            <th>Facebook URL</th>
                            <th>Facebook Username</th>
                            <th>Facebook ID</th>
                            <th>Twitter URL</th>
                            <th>Twitter Username</th>
                            <th>GitHub URL</th>
                            <th>GitHub Username</th>
                            <th>Work Email</th>
                            <th>Mobile Phone</th>
                            <th>Industry</th>
                            <th>Job Title</th>
                            <th>Job Title Role</th>
                            <th>Job Title Sub Role</th>
                            <th>Job Title Levels</th>
                            <th>Job Company ID</th>
                            <th>Job Company Name</th>
                            <th>Job Company Website</th>
                            <th>Job Company Size</th>
                            <th>Job Company Founded</th>
                            <th>Job Company Industry</th>
                            <th>Job Company LinkedIn URL</th>
                            <th>Job Company LinkedIn ID</th>
                            <th>Job Company Facebook URL</th>
                            <th>Job Company Twitter URL</th>
                            <th>Job Company Location Name</th>
                            <th>Job Company Location Locality</th>
                            <th>Job Company Location Metro</th>
                            <th>Job Company Location Region</th>
                            <th>Job Company Location Geo</th>
                            <th>Job Company Location Street Address</th>
                            <th>Job Company Location Address Line 2</th>
                            <th>Job Company Location Postal Code</th>
                            <th>Job Company Location Country</th>
                            <th>Job Company Location Continent</th>
                            <th>Job Last Updated</th>
                            <th>Job Start Date</th>
                            <th>Job Summary</th>
                            <th>Location Name</th>
                            <th>Location Locality</th>
                            <th>Location Metro</th>
                            <th>Location Region</th>
                            <th>Location Country</th>
                            <th>Location Continent</th>
                            <th>Location Street Address</th>
                            <th>Location Address Line 2</th>
                            <th>Location Postal Code</th>
                            <th>Location Geo</th>
                            <th>Location Last Updated</th>
                            <th>LinkedIn Connections</th>
                            <th>Inferred Salary</th>
                            <th>Inferred Years Experience</th>
                            <th>Summary</th>
                            <th>Phone Numbers</th>
                            <th>Emails</th>
                            <th>Interests</th>
                            <th>Skills</th>
                            <th>Location Names</th>
                            <th>Regions</th>
                            <th>Countries</th>
                            <th>Street Addresses</th>
                            <th>Experience</th>
                            <th>Education</th>
                            <th>Profiles</th>
                            <th>Certifications</th>
                            <th>Languages</th>
                            <th>Version Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for person in results %}
                            <tr>
                                <td>{{ person.IDS }}</td>
                                <td>{{ person.id }}</td>
                                <td>{{ person.full_name }}</td>
                                <td>{{ person.first_name }}</td>
                                <td>{{ person.middle_initial }}</td>
                                <td>{{ person.middle_name }}</td>
                                <td>{{ person.last_name }}</td>
                                <td>{{ person.gender }}</td>
                                <td>{{ person.birth_year }}</td>
                                <td>{{ person.birth_date }}</td>
                                <td>{{ person.linkedin_url }}</td>
                                <td>{{ person.linkedin_username }}</td>
                                <td>{{ person.linkedin_id }}</td>
                                <td>{{ person.facebook_url }}</td>
                                <td>{{ person.facebook_username }}</td>
                                <td>{{ person.facebook_id }}</td>
                                <td>{{ person.twitter_url }}</td>
                                <td>{{ person.twitter_username }}</td>
                                <td>{{ person.github_url }}</td>
                                <td>{{ person.github_username }}</td>
                                <td>{{ person.work_email }}</td>
                                <td>{{ person.mobile_phone }}</td>
                                <td>{{ person.industry }}</td>
                                <td>{{ person.job_title }}</td>
                                <td>{{ person.job_title_role }}</td>
                                <td>{{ person.job_title_sub_role }}</td>
                                <td>{{ person.job_title_levels }}</td>
                                <td>{{ person.job_company_id }}</td>
                                <td>{{ person.job_company_name }}</td>
                                <td>{{ person.job_company_website }}</td>
                                <td>{{ person.job_company_size }}</td>
                                <td>{{ person.job_company_founded }}</td>
                                <td>{{ person.job_company_industry }}</td>
                                <td>{{ person.job_company_linkedin_url }}</td>
                                <td>{{ person.job_company_linkedin_id }}</td>
                                <td>{{ person.job_company_facebook_url }}</td>
                                <td>{{ person.job_company_twitter_url }}</td>
                                <td>{{ person.job_company_location_name }}</td>
                                <td>{{ person.job_company_location_locality }}</td>
                                <td>{{ person.job_company_location_metro }}</td>
                                <td>{{ person.job_company_location_region }}</td>
                                <td>{{ person.job_company_location_geo }}</td>
                                <td>{{ person.job_company_location_street_address }}</td>
                                <td>{{ person.job_company_location_address_line_2 }}</td>
                                <td>{{ person.job_company_location_postal_code }}</td>
                                <td>{{ person.job_company_location_country }}</td>
                                <td>{{ person.job_company_location_continent }}</td>
                                <td>{{ person.job_last_updated }}</td>
                                <td>{{ person.job_start_date }}</td>
                                <td>{{ person.job_summary }}</td>
                                <td>{{ person.location_name }}</td>
                                <td>{{ person.location_locality }}</td>
                                <td>{{ person.location_metro }}</td>
                                <td>{{ person.location_region }}</td>
                                <td>{{ person.location_country }}</td>
                                <td>{{ person.location_continent }}</td>
                                <td>{{ person.location_street_address }}</td>
                                <td>{{ person.location_address_line_2 }}</td>
                                <td>{{ person.location_postal_code }}</td>
                                <td>{{ person.location_geo }}</td>
                                <td>{{ person.location_last_updated }}</td>
                                <td>{{ person.linkedin_connections }}</td>
                                <td>{{ person.inferred_salary }}</td>
                                <td>{{ person.inferred_years_experience }}</td>
                                <td>{{ person.summary }}</td>
                                <td>{{ person.phone_numbers }}</td>
                                <td>{{ person.emails }}</td>
                                <td>{{ person.interests }}</td>
                                <td>{{ person.skills }}</td>
                                <td>{{ person.location_names }}</td>
                                <td>{{ person.regions }}</td>
                                <td>{{ person.countries }}</td>
                                <td>{{ person.street_addresses }}</td>
                                <td>{{ person.experience }}</td>
                                <td>{{ person.education }}</td>
                                <td>{{ person.profiles }}</td>
                                <td>{{ person.certifications }}</td>
                                <td>{{ person.languages }}</td>
                                <td>{{ person.version_status }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <!-- Pagination -->
                <div class="pagination">
                    {% for page in paginator.page_range %}
                        <a href="?page={{ page }}{% if request.GET.full_name %}&full_name={{ request.GET.full_name }}{% endif %}{% if request.GET.job_title %}&job_title={{ request.GET.job_title }}{% endif %}{% if request.GET.job_title_sub_role %}&job_title_sub_role={{ request.GET.job_title_sub_role }}{% endif %}{% if request.GET.job_company_location_name %}&job_company_location_name={{ request.GET.job_company_location_name }}{% endif %}{% if request.GET.industry %}&industry={{ request.GET.industry }}{% endif %}{% if request.GET.location_name %}&location_name={{ request.GET.location_name }}{% endif %}{% if request.GET.location_country %}&location_country={{ request.GET.location_country }}{% endif %}{% if request.GET.skills %}&skills={{ request.GET.skills }}{% endif %}{% if request.GET.countries %}&countries={{ request.GET.countries }}{% endif %}{% if request.GET.education %}&education={{ request.GET.education }}{% endif %}" class="page-number {% if page == paginator.number %}active{% endif %}">{{ page }}</a>
                    {% endfor %}
                </div>
            {% else %}
                <p>No results found.</p>
            {% endif %}
        {% endif %}
    </div>
</body>
</html>
